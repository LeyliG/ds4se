---

title: Data Management Transforms


keywords: fastai
sidebar: home_sidebar

summary: "This module contains all of the transforms that can be applied to code related data."
description: "This module contains all of the transforms that can be applied to code related data."
nb_path: "nbs/01_data.management.transforms.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/01_data.management.transforms.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="filter_df" class="doc_header"><code>filter_df</code><a href="https://github.com/wm-semeru/ds4se/tree/master/ds4se/data/management/transforms.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>filter_df</code>(<strong><code>df</code></strong>:<code>DataFrame</code>, <strong><code>filter_fn</code></strong>:<code>Callable</code>, <strong><code>col</code></strong>:<code>str</code>, <strong><code>n</code></strong>:<code>Optional</code>[<code>int</code>]=<em><code>None</code></em>)</p>
</blockquote>
<p>Filter the given pandas dataframe using the given transformation.</p>
<p>:param df: the dataframe containing each method to be transformed
:param filter_fn: the filter function that will be applied to each method in the dataframe
:param col: the column to get the examples from
:param n: the number of examples to evaluate. If none, the entire dataframe will be used
:returns: returns a modified dataframe with the rows filtered</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="transform_df" class="doc_header"><code>transform_df</code><a href="https://github.com/wm-semeru/ds4se/tree/master/ds4se/data/management/transforms.py#L34" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>transform_df</code>(<strong><code>df</code></strong>:<code>DataFrame</code>, <strong><code>transform_fn</code></strong>:<code>Callable</code>, <strong><code>col</code></strong>:<code>str</code>, <strong><code>n</code></strong>:<code>Optional</code>[<code>int</code>]=<em><code>None</code></em>)</p>
</blockquote>
<p>Transform the given pandas dataframe using the given transformation.</p>
<p>:param df: the dataframe containing each method to be transformed
:param transform_fn: the transformation that will be applied to each example in the dataframe
:param col: the column to get the examples from
:param n: the number of examples to evaluate. If none, the entire dataframe will be used
:returns: returns a modified dataframe with the examples transformed</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Semantic-Preserving">Semantic Preserving<a class="anchor-link" href="#Semantic-Preserving"> </a></h1><p>Semantic preserving transformations do not change the functionality or meaning of a piece of data, e.g., comment removal.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Source-Code">Source Code<a class="anchor-link" href="#Source-Code"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_ascii" class="doc_header"><code>is_ascii</code><a href="https://github.com/wm-semeru/ds4se/tree/master/ds4se/data/management/transforms.py#L55" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_ascii</code>(<strong><code>example</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Check if the given example contains only ASCII characters. From <a href="https://stackoverflow.com/a/27084708/5768407">https://stackoverflow.com/a/27084708/5768407</a>.</p>
<p>:param example: the data to verify contains only ASCII characters
:returns: returns a boolean representing whether or not the given example contains only ASCII characters</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_fake</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="s2">&quot;this is a test&quot;</span><span class="p">,</span> <span class="s2">&quot;भारत test&quot;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">])</span>

<span class="n">NON_ASCII_DF</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="s2">&quot;this is a test&quot;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">])</span>
<span class="n">df_non_ascii</span> <span class="o">=</span> <span class="n">filter_df</span><span class="p">(</span><span class="n">df_fake</span><span class="p">,</span> <span class="n">is_ascii</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span><span class="p">)</span>

<span class="k">assert</span> <span class="p">(</span><span class="n">NON_ASCII_DF</span> <span class="o">==</span> <span class="n">df_non_ascii</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_comments" class="doc_header"><code>remove_comments</code><a href="https://github.com/wm-semeru/ds4se/tree/master/ds4se/data/management/transforms.py#L70" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_comments</code>(<strong><code>parser</code></strong>:<code>FastParser</code>, <strong><code>code</code></strong>:<code>str</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_fake</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="sd">&quot;&quot;&quot;\</span>
<span class="sd">public static void main(String[] args) {</span>
<span class="sd">    // inline comment</span>
<span class="sd">    System.out.println(&quot;Hello, world!&quot;)</span>
<span class="sd">    /**</span>
<span class="sd">        multi-line inline comment</span>
<span class="sd">    */</span>
<span class="sd">}&quot;&quot;&quot;</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">NO_COMMENTS_DF</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="sd">&quot;&quot;&quot;\</span>
<span class="sd">public static void main(String[] args) {</span>
<span class="sd">    </span>
<span class="sd">    System.out.println(&quot;Hello, world!&quot;)</span>
<span class="sd">    </span>
<span class="sd">}&quot;&quot;&quot;</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">FastParser</span><span class="p">(</span><span class="s2">&quot;java&quot;</span><span class="p">)</span>
<span class="n">df_no_comments</span> <span class="o">=</span> <span class="n">transform_df</span><span class="p">(</span>
    <span class="n">df_fake</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">example</span><span class="p">:</span> <span class="n">remove_comments</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">example</span><span class="p">),</span> <span class="s2">&quot;code&quot;</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="p">(</span><span class="n">NO_COMMENTS_DF</span> <span class="o">==</span> <span class="n">df_no_comments</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Repo already exists, continuing.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Non-Semantic-Preserving">Non-Semantic Preserving<a class="anchor-link" href="#Non-Semantic-Preserving"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Source-Code">Source Code<a class="anchor-link" href="#Source-Code"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="randomize_lines" class="doc_header"><code>randomize_lines</code><a href="https://github.com/wm-semeru/ds4se/tree/master/ds4se/data/management/transforms.py#L78" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>randomize_lines</code>(<strong><code>example</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Randomize the lines in a given example.</p>
<p>:param example: the example to have its lines randomized
:returns: returns the method with its lines randomized</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>

<span class="n">df_fake</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="sd">&quot;&quot;&quot;\</span>
<span class="sd">public static void main(String[] args) {</span>
<span class="sd">    System.out.println(&quot;Hello, world!&quot;)</span>
<span class="sd">}&quot;&quot;&quot;</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">RANDOM_LINES_DF</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="sd">&quot;&quot;&quot;\</span>
<span class="sd">    System.out.println(&quot;Hello, world!&quot;)</span>
<span class="sd">public static void main(String[] args) {</span>
<span class="sd">}&quot;&quot;&quot;</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">FastParser</span><span class="p">(</span><span class="s2">&quot;java&quot;</span><span class="p">)</span>
<span class="n">df_random_lines</span> <span class="o">=</span> <span class="n">transform_df</span><span class="p">(</span><span class="n">df_fake</span><span class="p">,</span> <span class="n">randomize_lines</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span><span class="p">)</span>
<span class="c1"># df_random_lines.code.values[0]</span>

<span class="k">assert</span> <span class="p">(</span><span class="n">RANDOM_LINES_DF</span> <span class="o">==</span> <span class="n">df_random_lines</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Repo already exists, continuing.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="randomize_tokens" class="doc_header"><code>randomize_tokens</code><a href="https://github.com/wm-semeru/ds4se/tree/master/ds4se/data/management/transforms.py#L91" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>randomize_tokens</code>(<strong><code>example</code></strong>:<code>str</code>)</p>
</blockquote>
<p>Randomize the tokens in a given method.</p>
<p>:param mthd: the method to have its code tokens randomized
:returns: returns the method with its code tokens randomized</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">random</span>

<span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>

<span class="n">df_fake</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="sd">&quot;&quot;&quot;\</span>
<span class="sd">public static void main(String[] args) {</span>
<span class="sd">    System.out.println(&quot;Hello, world!&quot;)</span>
<span class="sd">}&quot;&quot;&quot;</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">RANDOM_TOKENS_DF</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="sd">&quot;&quot;&quot;\</span>
<span class="sd"> main(String[] void  {</span>
<span class="sd">  System.out.println(&quot;Hello, args) public static world!&quot;)</span>
<span class="sd">}&quot;&quot;&quot;</span>
    <span class="p">],</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">FastParser</span><span class="p">(</span><span class="s2">&quot;java&quot;</span><span class="p">)</span>
<span class="n">df_random_tokens</span> <span class="o">=</span> <span class="n">transform_df</span><span class="p">(</span><span class="n">df_fake</span><span class="p">,</span> <span class="n">randomize_tokens</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span><span class="p">)</span>

<span class="k">assert</span> <span class="p">(</span><span class="n">RANDOM_TOKENS_DF</span> <span class="o">==</span> <span class="n">df_random_tokens</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Repo already exists, continuing.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Pipeline">Pipeline<a class="anchor-link" href="#Pipeline"> </a></h1><p>Composes multiple transformations to apply to a set of data</p>

</div>
</div>
</div>
</div>
 

